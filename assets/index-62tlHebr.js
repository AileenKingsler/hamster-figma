(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))l(s);new MutationObserver(s=>{for(const f of s)if(f.type==="childList")for(const a of f.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&l(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const f={};return s.integrity&&(f.integrity=s.integrity),s.referrerPolicy&&(f.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?f.credentials="include":s.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function l(s){if(s.ep)return;s.ep=!0;const f=n(s);fetch(s.href,f)}})();const I=(e,t)=>{e.beginPath(),e.moveTo(t.start.x,t.start.y),e.lineTo(t.end.x,t.end.y),e.lineWidth=1,e.stroke()},O=(e,t,n)=>{S(e,[t.start,t.end],n)},_=(e,t)=>{e.strokeRect(t.start.x,t.start.y,t.end.x-t.start.x,t.end.y-t.start.y)},q=(e,t,n)=>{const l=[t.start,{x:t.end.x,y:t.start.y},t.end,{x:t.start.x,y:t.end.y}];S(e,l,n)},H=(e,t)=>{e.clearRect(0,0,t.width,t.height)},h=(e,t,n,l)=>{H(e,t),n.forEach(s=>I(e,s)),l.forEach(s=>_(e,s))},F=(e,t,n,l,s)=>{e.beginPath(),e.arc(t.x,t.y,n,0,2*Math.PI),l&&(e.lineWidth=l,e.stroke()),s&&(e.fillStyle=s,e.fill())},S=(e,t,n)=>{t.forEach(l=>{F(e,l,n,2,"white")})},m=(e,t,n)=>e.offsetX>t.x-n*2&&e.offsetX<t.x+n*2&&e.offsetY>t.y-n*2&&e.offsetY<t.y+n*2,P=e=>{const t=e.currentTarget,n=document.querySelector(".toolbar__button.active");n==null||n.classList.remove("active"),t==null||t.classList.add("active")},R=()=>{const e=document.querySelector("canvas"),t=e==null?void 0:e.getContext("2d"),n=document.querySelector('.toolbar__button[data-shape="line"]'),l=document.querySelector('.toolbar__button[data-shape="square"]');if(!e||!t)return;t.strokeStyle="blue";let s="line",f=!1,a=!1,u=!1,y=!1,g=!1,p=!1;const c=4,i=[],d=[],L=o=>{P(o),s="line"},M=o=>{P(o),s="square"},b=o=>{if(s==="line"){if(i.length){const r=m(o,i[i.length-1].start,c),x=m(o,i[i.length-1].end,c);if(r){u=!0;return}if(x){y=!0;return}}f=!0,i.push({start:{x:o.offsetX,y:o.offsetY},end:{x:o.offsetX,y:o.offsetY}})}if(s==="square"){if(d.length){const r=d[d.length-1],x=m(o,r.start,c),E=m(o,r.end,c),X=m(o,{x:r.end.x,y:r.start.y},c),Y=m(o,{x:r.start.x,y:r.end.y},c);if(x){u=!0;return}if(E){y=!0;return}if(X){g=!0;return}if(Y){p=!0;return}}f=!0,d.push({start:{x:o.offsetX,y:o.offsetY},end:{x:o.offsetX,y:o.offsetY}})}},v=o=>{if(s==="line"){const r=i[i.length-1];(f||y)&&(a=!0,r.end.x=o.offsetX,r.end.y=o.offsetY,h(t,e,i,d)),u&&(a=!0,r.start.x=o.offsetX,r.start.y=o.offsetY,h(t,e,i,d))}if(s==="square"){const r=d[d.length-1];(f||y)&&(a=!0,r.end.x=o.offsetX,r.end.y=o.offsetY,h(t,e,i,d)),u&&(a=!0,r.start.x=o.offsetX,r.start.y=o.offsetY,h(t,e,i,d)),g&&(a=!0,r.end.x=o.offsetX,r.start.y=o.offsetY,h(t,e,i,d)),p&&(a=!0,r.start.x=o.offsetX,r.end.y=o.offsetY,h(t,e,i,d))}},w=()=>{s==="line"&&(f=!1,u=!1,y=!1,a&&O(t,i[i.length-1],c),a=!1),s==="square"&&(f=!1,u=!1,y=!1,g=!1,p=!1,a&&q(t,d[d.length-1],c),a=!1)};n==null||n.addEventListener("click",L),l==null||l.addEventListener("click",M),e==null||e.addEventListener("mousedown",b),e==null||e.addEventListener("mousemove",v),e==null||e.addEventListener("mouseup",w)};R();
